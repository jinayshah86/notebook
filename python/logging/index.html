<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This is mickey mouse's notebook"><meta name=author content="Mickey Mouse"><link href=https://jinayshah.netlify.com/python/logging/ rel=canonical><link href=../concurrency/ rel=prev><link href=../references/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.3, mkdocs-material-9.1.18"><title>Logging - Mickey Mouse's Notebook</title><link rel=stylesheet href=../../assets/stylesheets/main.26e3688c.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,300i,400,400i,700,700i%7CHack:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto Mono";--md-code-font:"Hack"}</style><link rel=stylesheet href=../../css/timeago.css><link rel=stylesheet href=https://unpkg.com/mermaid@7.1.2/dist/mermaid.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#intorduction class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Mickey Mouse's Notebook" class="md-header__button md-logo" aria-label="Mickey Mouse's Notebook" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Mickey Mouse's Notebook </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Logging </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Mickey Mouse's Notebook" class="md-nav__button md-logo" aria-label="Mickey Mouse's Notebook" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Mickey Mouse's Notebook </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> Python <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../functions/ class=md-nav__link> Functions </a> </li> <li class=md-nav__item> <a href=../decorators/ class=md-nav__link> Decorators </a> </li> <li class=md-nav__item> <a href=../oop/ class=md-nav__link> OOP </a> </li> <li class=md-nav__item> <a href=../iterators/ class=md-nav__link> Iterators </a> </li> <li class=md-nav__item> <a href=../files/ class=md-nav__link> Working with files </a> </li> <li class=md-nav__item> <a href=../custom-json/ class=md-nav__link> Custom JSON Encoder/Decoder </a> </li> <li class=md-nav__item> <a href=../pickling/ class=md-nav__link> Pickling </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_8> <label class=md-nav__link for=__nav_2_8 id=__nav_2_8_label tabindex=0> Testing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_8_label aria-expanded=false> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> Testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../testing/introduction/ class=md-nav__link> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_8_2> <label class=md-nav__link for=__nav_2_8_2 id=__nav_2_8_2_label tabindex=0> Pytest <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_8_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_8_2> <span class="md-nav__icon md-icon"></span> Pytest </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../testing/pytest/tests/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../testing/pytest/markers/ class=md-nav__link> Markers </a> </li> <li class=md-nav__item> <a href=../testing/pytest/parametrization/ class=md-nav__link> Parametrization </a> </li> <li class=md-nav__item> <a href=../testing/pytest/fixtures/ class=md-nav__link> Fixtures </a> </li> <li class=md-nav__item> <a href=../testing/pytest/plugins/ class=md-nav__link> Plugins </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../testing/tox/ class=md-nav__link> Tox </a> </li> <li class=md-nav__item> <a href=../testing/coverage/ class=md-nav__link> Coverage </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../exceptions/ class=md-nav__link> Exceptions </a> </li> <li class=md-nav__item> <a href=../profiling/ class=md-nav__link> Profiling </a> </li> <li class=md-nav__item> <a href=../concurrency/ class=md-nav__link> Concurrent Execution </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Logging <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Logging </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#intorduction class=md-nav__link> Intorduction </a> </li> <li class=md-nav__item> <a href=#basic-configurations class=md-nav__link> Basic Configurations </a> </li> <li class=md-nav__item> <a href=#formatting-the-output class=md-nav__link> Formatting the Output </a> <nav class=md-nav aria-label="Formatting the Output"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#logging-variable-data class=md-nav__link> Logging Variable Data </a> </li> <li class=md-nav__item> <a href=#capturing-stack-traces class=md-nav__link> Capturing Stack Traces </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#classes-and-functions class=md-nav__link> Classes and Functions </a> </li> <li class=md-nav__item> <a href=#using-handlers class=md-nav__link> Using handlers </a> <nav class=md-nav aria-label="Using handlers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#list-of-handlers class=md-nav__link> List of handlers </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#other-configuration-methods class=md-nav__link> Other configuration methods </a> <nav class=md-nav aria-label="Other configuration methods"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#conf-file-approach class=md-nav__link> Conf file approach </a> </li> <li class=md-nav__item> <a href=#dictionary-approach class=md-nav__link> Dictionary approach </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#links class=md-nav__link> Links </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../references/ class=md-nav__link> References </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#intorduction class=md-nav__link> Intorduction </a> </li> <li class=md-nav__item> <a href=#basic-configurations class=md-nav__link> Basic Configurations </a> </li> <li class=md-nav__item> <a href=#formatting-the-output class=md-nav__link> Formatting the Output </a> <nav class=md-nav aria-label="Formatting the Output"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#logging-variable-data class=md-nav__link> Logging Variable Data </a> </li> <li class=md-nav__item> <a href=#capturing-stack-traces class=md-nav__link> Capturing Stack Traces </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#classes-and-functions class=md-nav__link> Classes and Functions </a> </li> <li class=md-nav__item> <a href=#using-handlers class=md-nav__link> Using handlers </a> <nav class=md-nav aria-label="Using handlers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#list-of-handlers class=md-nav__link> List of handlers </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#other-configuration-methods class=md-nav__link> Other configuration methods </a> <nav class=md-nav aria-label="Other configuration methods"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#conf-file-approach class=md-nav__link> Conf file approach </a> </li> <li class=md-nav__item> <a href=#dictionary-approach class=md-nav__link> Dictionary approach </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#links class=md-nav__link> Links </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Logging</h1> <h3 id=intorduction>Intorduction<a class=headerlink href=#intorduction title="Permanent link">&para;</a></h3> <p>Logging is performed by calling methods on instances of the <code>Logger</code> class. Each line you log has a level. The levels normally used are: <code>DEBUG</code>, <code>INFO</code>, <code>WARNING</code>, <code>ERROR</code>, and <code>CRITICAL</code>. You can import them from the <code>logging</code> module. They are in order of severity and it&rsquo;s very important to use them properly because they will help you filter the contents of a log file based on what you&rsquo;re searching for.</p> <h3 id=basic-configurations>Basic Configurations<a class=headerlink href=#basic-configurations title="Permanent link">&para;</a></h3> <p>You can use the <code>basicConfig(**kwargs)</code> method to configure the logging.</p> <p>Some of the commonly used parameters for basicConfig() are the following:</p> <ul> <li><strong>level:</strong> The root logger will be set to the specified severity level. </li> <li><strong>filename:</strong> This specifies the file.</li> <li><strong>filemode:</strong> If filename is given, the file is opened in this mode. The default is <code>a</code>, which means append.</li> <li><strong>format:</strong> This is the format of the log message.</li> </ul> <p>By using the <code>level</code> parameter, you can set what level of log messages you want to record. This can be done by passing one of the constants available in the class, and this would enable all logging calls at or above that level to be logged. By default, it&rsquo;s set to <code>logging.WARNING</code> Similarly, for logging to a file rather than the console, <code>filename</code> and <code>filemode</code> can be used, and you can decide the format of the message using <code>format</code>.</p> <p><strong>Example:</strong> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>logging</span>

<span class=n>logging</span><span class=o>.</span><span class=n>basicConfig</span><span class=p>(</span>
    <span class=n>filename</span><span class=o>=</span><span class=s1>&#39;temp.log&#39;</span><span class=p>,</span>
    <span class=n>filemode</span><span class=o>=</span><span class=s1>&#39;w&#39;</span><span class=p>,</span>   <span class=c1># opened in writing mode</span>
    <span class=n>level</span><span class=o>=</span><span class=n>logging</span><span class=o>.</span><span class=n>DEBUG</span><span class=p>,</span>  <span class=c1># minimum level capture in the file</span>
    <span class=nb>format</span><span class=o>=</span><span class=s1>&#39;[</span><span class=si>%(asctime)s</span><span class=s1>] </span><span class=si>%(levelname)s</span><span class=s1>: </span><span class=si>%(message)s</span><span class=s1>&#39;</span><span class=p>,</span>
    <span class=n>datefmt</span><span class=o>=</span><span class=s1>&#39;%m/</span><span class=si>%d</span><span class=s1>/%Y %I:%M:%S %p&#39;</span><span class=p>)</span>

<span class=n>mylist</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span>
<span class=n>logging</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>&#39;Starting to process `mylist`...&#39;</span><span class=p>)</span>

<span class=k>for</span> <span class=n>position</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>4</span><span class=p>):</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>logging</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
            <span class=s1>&#39;Value at position </span><span class=si>%s</span><span class=s1> is </span><span class=si>%s</span><span class=s1>&#39;</span><span class=p>,</span> <span class=n>position</span><span class=p>,</span> <span class=n>mylist</span><span class=p>[</span><span class=n>position</span><span class=p>]</span>
        <span class=p>)</span>
    <span class=k>except</span> <span class=ne>IndexError</span><span class=p>:</span>
        <span class=n>logging</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=s1>&#39;Faulty position: </span><span class=si>%s</span><span class=s1>&#39;</span><span class=p>,</span> <span class=n>position</span><span class=p>)</span>

<span class=n>logging</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>&#39;Done parsing `mylist`.&#39;</span><span class=p>)</span>
</code></pre></div></p> <p><strong>Log file:</strong> <div class=highlight><pre><span></span><code>[04/05/2020 11:13:48 AM] INFO:Starting to process `mylist`...
[04/05/2020 11:13:48 AM] DEBUG:Value at position 0 is 1
[04/05/2020 11:13:48 AM] DEBUG:Value at position 1 is 2
[04/05/2020 11:13:48 AM] DEBUG:Value at position 2 is 3
[04/05/2020 11:13:48 AM] ERROR:Faulty position: 3
Traceback (most recent call last):
  File &quot;log.py&quot;, line 15, in &lt;module&gt;
    position, mylist[position]))
IndexError: list index out of range
[04/05/2020 11:13:48 AM] INFO:Done parsing `mylist`.
</code></pre></div></p> <p>You can log to a file but you can also log to a network location, to a queue, to a console, and so on. In general, if you have an architecture that is deployed on one machine, logging to a file is acceptable, but when your architecture spans over multiple machines (such as in the case of service-oriented or microservice architectures), it&rsquo;s very useful to implement a centralized solution for logging so that all log messages coming from each service can be stored and investigated in a single place.</p> <p>It should be noted that calling <code>basicConfig()</code> to configure the root logger works only if the root logger has not been configured before. <strong>Basically, this function can only be called once.</strong></p> <p><code>debug()</code>, <code>info()</code>, <code>warning()</code>, <code>error()</code>, and <code>critical()</code> also call <code>basicConfig()</code> without arguments automatically if it has not been called before. This means that after the first time one of the above functions is called, you can no longer configure the root logger because they would have called the <code>basicConfig()</code> function internally.</p> <h3 id=formatting-the-output>Formatting the Output<a class=headerlink href=#formatting-the-output title="Permanent link">&para;</a></h3> <p>While you can pass any variable that can be represented as a string from your program as a message to your logs, there are some basic elements that are already a part of the <code>LogRecord</code> and can be easily added to the output format.</p> <table> <thead> <tr> <th>Attribute name</th> <th>Format</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><strong>args</strong></td> <td>You shouldn’t need to format this yourself.</td> <td>The tuple of arguments merged into msg to produce message, or a dict whose values are used for the merge (when there is only one argument, and it is a dictionary).</td> </tr> <tr> <td><strong>asctime</strong></td> <td>%(asctime)s</td> <td>Human-readable time when the LogRecord was created. By default this is of the form <strong>2003-07-08 16:49:45,896</strong> (the numbers after the comma are millisecond portion of the time).</td> </tr> <tr> <td><strong>created</strong></td> <td>%(created)f</td> <td>Time when the <code>LogRecord</code> was created (as returned by <code>time.time()</code>).</td> </tr> <tr> <td><strong>exc_info</strong></td> <td>You shouldn’t need to format this yourself.</td> <td>Exception tuple (à la <code>sys.exc_info</code>) or, if no exception has occurred, <code>None</code>.</td> </tr> <tr> <td><strong>filename</strong></td> <td>%(filename)s</td> <td>Filename portion of pathname.</td> </tr> <tr> <td><strong>funcName</strong></td> <td>%(funcName)s</td> <td>Name of function containing the logging call.</td> </tr> <tr> <td><strong>levelname</strong></td> <td>%(levelname)s</td> <td>Text logging level for the message (<code>DEBUG</code>, <code>INFO</code>, <code>WARNING</code>, <code>ERROR</code>, <code>CRITICAL</code>).</td> </tr> <tr> <td><strong>levelno</strong></td> <td>%(levelno)s</td> <td>Numeric logging level for the message (<code>DEBUG</code>, <code>INFO</code>, <code>WARNING</code>, <code>ERROR</code>, <code>CRITICAL</code>).</td> </tr> <tr> <td><strong>lineno</strong></td> <td>%(lineno)d</td> <td>Source line number where the logging call was issued (if available).</td> </tr> <tr> <td><strong>message</strong></td> <td>%(message)s</td> <td>The logged message, computed as msg % args. This is set when Formatter.format() is invoked.</td> </tr> <tr> <td><strong>module</strong></td> <td>%(module)s</td> <td>Module (name portion of filename).</td> </tr> <tr> <td><strong>msecs</strong></td> <td>%(msecs)d</td> <td>Millisecond portion of the time when the <code>LogRecord</code> was created.</td> </tr> <tr> <td><strong>msg</strong></td> <td>You shouldn’t need to format this yourself.</td> <td>The format string passed in the original logging call. Merged with args to produce message, or an arbitrary object.</td> </tr> <tr> <td><strong>name</strong></td> <td>%(name)s</td> <td>Name of the logger used to log the call.</td> </tr> <tr> <td><strong>pathname</strong></td> <td>%(pathname)s</td> <td>Full pathname of the source file where the logging call was issued (if available).</td> </tr> <tr> <td><strong>process</strong></td> <td>%(process)d</td> <td>Process ID (if available).</td> </tr> <tr> <td><strong>processName</strong></td> <td>%(processName)s</td> <td>Process name (if available).</td> </tr> <tr> <td><strong>relativeCreated</strong></td> <td>%(relativeCreated)d</td> <td>Time in milliseconds when the <code>LogRecord</code> was created, relative to the time the logging module was loaded.</td> </tr> <tr> <td><strong>stack_info</strong></td> <td>You shouldn’t need to format this yourself.</td> <td>Stack frame information (where available) from the bottom of the stack in the current thread, up to and including the stack frame of the logging call which resulted in the creation of this record.</td> </tr> <tr> <td><strong>thread</strong></td> <td>%(thread)d</td> <td>Thread ID (if available).</td> </tr> <tr> <td><strong>threadName</strong></td> <td>%(threadName)s</td> <td>Thread name (if available).</td> </tr> </tbody> </table> <p><strong>Example:</strong> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>logging</span>

<span class=n>logging</span><span class=o>.</span><span class=n>basicConfig</span><span class=p>(</span><span class=nb>format</span><span class=o>=</span><span class=s1>&#39;</span><span class=si>%(process)d</span><span class=s1>-</span><span class=si>%(levelname)s</span><span class=s1>-</span><span class=si>%(message)s</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=n>logging</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s1>&#39;This is a Warning&#39;</span><span class=p>)</span>
</code></pre></div></p> <p><strong>Output:</strong> <div class=highlight><pre><span></span><code>18472-WARNING-This is a Warning
</code></pre></div></p> <h4 id=logging-variable-data>Logging Variable Data<a class=headerlink href=#logging-variable-data title="Permanent link">&para;</a></h4> <p>The arguments passed to the method would be included as variable data in the message.</p> <p><strong>Example:</strong> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>logging</span>

<span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;John&#39;</span>
<span class=n>logging</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s1>&#39;</span><span class=si>%s</span><span class=s1> raised an error&#39;</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
</code></pre></div></p> <p><strong>Output:</strong> <div class=highlight><pre><span></span><code>ERROR:root:John raised an error
</code></pre></div></p> <h4 id=capturing-stack-traces>Capturing Stack Traces<a class=headerlink href=#capturing-stack-traces title="Permanent link">&para;</a></h4> <p>The logging module also allows you to capture the full stack traces in an application. Exception information can be captured if the <code>exc_info</code> parameter is passed as <code>True</code>. This works with all the level methods.</p> <p><strong>Example:</strong> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>logging</span>

<span class=n>a</span> <span class=o>=</span> <span class=mi>5</span>
<span class=n>b</span> <span class=o>=</span> <span class=mi>0</span>

<span class=k>try</span><span class=p>:</span>
  <span class=n>c</span> <span class=o>=</span> <span class=n>a</span> <span class=o>/</span> <span class=n>b</span>
<span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
  <span class=n>logging</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>&quot;Exception occurred&quot;</span><span class=p>,</span> <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
  <span class=c1># or one should use `logging.execption(&quot;Exception occured&quot;)`</span>
</code></pre></div></p> <p><strong>Output:</strong> <div class=highlight><pre><span></span><code>ERROR:root:Exception occurred
Traceback (most recent call last):
  File &quot;exceptions.py&quot;, line 6, in &lt;module&gt;
    c = a / b
ZeroDivisionError: division by zero
</code></pre></div></p> <p>If <code>exc_info</code> is not set to <code>True</code>, the output of the above program would not tell us anything about the exception, which, in a real-world scenario, might not be as simple as a <code>ZeroDivisionError</code>. Imagine trying to debug an error in a complicated codebase with a log that shows only this:</p> <div class=highlight><pre><span></span><code>ERROR:root:Exception occurred
</code></pre></div> <p>If you’re logging from an exception handler, use the <code>logging.exception()</code> method, which logs a message with level <code>ERROR</code> and adds exception information to the message. To put it more simply, calling <code>logging.exception()</code> is like calling <code>logging.error(exc_info=True)</code>. But since this method always dumps exception information, it should only be called from an exception handler. </p> <h3 id=classes-and-functions>Classes and Functions<a class=headerlink href=#classes-and-functions title="Permanent link">&para;</a></h3> <p>You can (and should) define your own logger by creating an object of the <code>Logger</code> class, especially if your application has multiple modules. The most commonly used classes defined in the logging module are the following:</p> <ul> <li> <p><strong>Logger:</strong> This is the class whose objects will be used in the application code directly to call the functions.</p> </li> <li> <p><strong>LogRecord:</strong> Loggers automatically create LogRecord objects that have all the information related to the event being logged, like the name of the logger, the function, the line number, the message, and more.</p> </li> <li> <p><strong>Handler:</strong> Handlers send the LogRecord to the required output destination, like the console or a file. Handler is a base for subclasses like <code>StreamHandler</code>, <code>FileHandler</code>, <code>SMTPHandler</code>, <code>HTTPHandler</code>, and more. These subclasses send the logging outputs to corresponding destinations, like <code>sys.stdout</code> or a disk file.</p> </li> <li> <p><strong>Formatter:</strong> This is where you specify the format of the output by specifying a string format that lists out the attributes that the output should contain.</p> </li> </ul> <p>Out of these, we mostly deal with the objects of the <code>Logger</code> class, which are instantiated using the module-level function <code>logging.getLogger(name)</code>. Multiple calls to <code>getLogger()</code> with the same name will return a reference to the same <code>Logger</code> object, which saves us from passing the logger objects to every part where it’s needed. </p> <p><strong>Example:</strong> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>logging</span>

<span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s1>&#39;example_logger&#39;</span><span class=p>)</span>
<span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s1>&#39;This is a warning&#39;</span><span class=p>)</span>
</code></pre></div></p> <p><strong>Output:</strong> <div class=highlight><pre><span></span><code>This is a warning
</code></pre></div></p> <p>This creates a custom logger named <code>example_logger</code>, but unlike the root logger, the name of a custom logger is not part of the default output format and has to be added to the configuration. Again, unlike the root logger, a custom logger can’t be configured using <code>basicConfig()</code>. You have to configure it using <strong>Handlers</strong> and <strong>Formatters</strong>:</p> <p>It is recommended that we use module-level loggers by passing <code>__name__</code> as the name parameter to <code>getLogger()</code> to create a logger object as the name of the logger itself would tell us from where the events are being logged. <code>__name__</code> is a special built-in variable in Python which evaluates to the name of the current module.</p> <h3 id=using-handlers>Using handlers<a class=headerlink href=#using-handlers title="Permanent link">&para;</a></h3> <p>A logger that you create can have more than one handler, which means you can set it up to be saved to a log file and also send it over email.</p> <p>Like loggers, you can also set the severity level in handlers. This is useful if you want to set multiple handlers for the same logger but want different severity levels for each of them. For example, you may want logs with level <code>WARNING</code> and above to be logged to the console, but everything with level <code>ERROR</code> and above should also be saved to a file.</p> <p><strong>Example:</strong> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>logging</span>

<span class=c1># Create a custom logger</span>
<span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>

<span class=c1># Create handlers</span>
<span class=n>c_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>StreamHandler</span><span class=p>()</span>
<span class=n>f_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>FileHandler</span><span class=p>(</span><span class=s1>&#39;file.log&#39;</span><span class=p>)</span>
<span class=n>c_handler</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>WARNING</span><span class=p>)</span>
<span class=n>f_handler</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>ERROR</span><span class=p>)</span>

<span class=c1># Create formatters and add it to handlers</span>
<span class=n>c_format</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>Formatter</span><span class=p>(</span><span class=s1>&#39;</span><span class=si>%(name)s</span><span class=s1> - </span><span class=si>%(levelname)s</span><span class=s1> - </span><span class=si>%(message)s</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=n>f_format</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>Formatter</span><span class=p>(</span>
    <span class=s1>&#39;</span><span class=si>%(asctime)s</span><span class=s1> - </span><span class=si>%(name)s</span><span class=s1> - </span><span class=si>%(levelname)s</span><span class=s1> - </span><span class=si>%(message)s</span><span class=s1>&#39;</span><span class=p>)</span>
<span class=n>c_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>c_format</span><span class=p>)</span>
<span class=n>f_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>f_format</span><span class=p>)</span>

<span class=c1># Add handlers to the logger</span>
<span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>c_handler</span><span class=p>)</span>
<span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>f_handler</span><span class=p>)</span>

<span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s1>&#39;This is a warning&#39;</span><span class=p>)</span>
<span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s1>&#39;This is an error&#39;</span><span class=p>)</span>
</code></pre></div></p> <p><strong>Console output:</strong> <div class=highlight><pre><span></span><code>__main__ - WARNING - This is a warning
__main__ - ERROR - This is an error
</code></pre></div></p> <p><strong>File output:</strong> <div class=highlight><pre><span></span><code>2020-04-05 16:12:21,723 - __main__ - ERROR - This is an error
</code></pre></div></p> <h4 id=list-of-handlers>List of handlers<a class=headerlink href=#list-of-handlers title="Permanent link">&para;</a></h4> <ul> <li> <p><strong>StreamHandler</strong> instances send messages to streams (file-like objects).</p> </li> <li> <p><strong>FileHandler</strong> instances send messages to disk files.</p> </li> <li> <p><strong>BaseRotatingHandler</strong> is the base class for handlers that rotate log files at a certain point. It is not meant to be instantiated directly. Instead, use <code>RotatingFileHandler</code> or <code>TimedRotatingFileHandler</code>.</p> </li> <li> <p><strong>RotatingFileHandler</strong> instances send messages to disk files, with support for maximum log file sizes and log file rotation.</p> </li> <li> <p><strong>TimedRotatingFileHandler</strong> instances send messages to disk files, rotating the log file at certain timed intervals.</p> </li> <li> <p><strong>SocketHandler</strong> instances send messages to TCP/IP sockets. Since 3.4, Unix domain sockets are also supported.</p> </li> <li> <p><strong>DatagramHandler</strong> instances send messages to UDP sockets. Since 3.4, Unix domain sockets are also supported.</p> </li> <li> <p><strong>SMTPHandler</strong> instances send messages to a designated email address.</p> </li> <li> <p><strong>SysLogHandler</strong> instances send messages to a Unix syslog daemon, possibly on a remote machine.</p> </li> <li> <p><strong>NTEventLogHandler</strong> instances send messages to a Windows NT/2000/XP event log.</p> </li> <li> <p><strong>MemoryHandler</strong> instances send messages to a buffer in memory, which is flushed whenever specific criteria are met.</p> </li> <li> <p><strong>HTTPHandler</strong> instances send messages to an HTTP server using either GET or POST semantics.</p> </li> <li> <p><strong>WatchedFileHandler</strong> instances watch the file they are logging to. If the file changes, it is closed and reopened using the file name. This handler is only useful on Unix-like systems; Windows does not support the underlying mechanism used.</p> </li> <li> <p><strong>QueueHandler</strong> instances send messages to a queue, such as those implemented in the queue or multiprocessing modules.</p> </li> <li> <p><strong>NullHandler</strong> instances do nothing with error messages. They are used by library developers who want to use logging, but want to avoid the &lsquo;<strong>No handlers could be found for logger XXX</strong>&lsquo; message which can be displayed if the library user has not configured logging.</p> </li> </ul> <h3 id=other-configuration-methods>Other configuration methods<a class=headerlink href=#other-configuration-methods title="Permanent link">&para;</a></h3> <p>You can configure logging as shown above using the module and class functions or by creating a config file or a dictionary and loading it using <code>fileConfig()</code> or <code>dictConfig()</code> respectively. These are useful in case you want to change your logging configuration in a running application.</p> <h4 id=conf-file-approach>Conf file approach<a class=headerlink href=#conf-file-approach title="Permanent link">&para;</a></h4> <p><strong>Example config file: <code>log.conf</code></strong> <div class=highlight><pre><span></span><code>[loggers]
keys=root,sampleLogger

[handlers]
keys=consoleHandler

[formatters]
keys=sampleFormatter

[logger_root]
level=DEBUG
handlers=consoleHandler

[logger_sampleLogger]
level=DEBUG
handlers=consoleHandler
qualname=sampleLogger
propagate=0

[handler_consoleHandler]
class=StreamHandler
level=DEBUG
formatter=sampleFormatter
args=(sys.stdout,)

[formatter_sampleFormatter]
format=%(asctime)s - %(name)s - %(levelname)s - %(message)s
</code></pre></div></p> <p>In the above file, there are two loggers, one handler, and one formatter. After their names are defined, they are configured by adding the words logger, handler, and formatter before their names separated by an underscore.</p> <p>To load this config file, you have to use <code>fileConfig()</code>: <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>logging</span>
<span class=kn>import</span> <span class=nn>logging.config</span>

<span class=n>logging</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>fileConfig</span><span class=p>(</span><span class=n>fname</span><span class=o>=</span><span class=s1>&#39;log.conf&#39;</span><span class=p>,</span> <span class=n>disable_existing_loggers</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>

<span class=c1># Get the logger specified in the file</span>
<span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>

<span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s1>&#39;This is a debug message&#39;</span><span class=p>)</span>
</code></pre></div></p> <p><strong>Output:</strong> <div class=highlight><pre><span></span><code>2018-07-13 13:57:45,467 - __main__ - DEBUG - This is a debug message
</code></pre></div></p> <p>The path of the config file is passed as a parameter to the <code>fileConfig()</code> method, and the <code>disable_existing_loggers</code> parameter is used to keep or disable the loggers that are present when the function is called. It defaults to <code>True</code> if not mentioned. If <code>propagate</code> attribute evaluates to true, events logged to this logger will be passed to the handlers of higher level (ancestor) loggers, in addition to any handlers attached to this logger.</p> <h4 id=dictionary-approach>Dictionary approach<a class=headerlink href=#dictionary-approach title="Permanent link">&para;</a></h4> <p>Here’s the same configuration in a YAML format for the dictionary approach:</p> <div class=highlight><pre><span></span><code><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class=nt>formatters</span><span class=p>:</span>
<span class=w>  </span><span class=nt>simple</span><span class=p>:</span>
<span class=w>    </span><span class=nt>format</span><span class=p>:</span><span class=w> </span><span class=s>&#39;%(asctime)s</span><span class=nv> </span><span class=s>-</span><span class=nv> </span><span class=s>%(name)s</span><span class=nv> </span><span class=s>-</span><span class=nv> </span><span class=s>%(levelname)s</span><span class=nv> </span><span class=s>-</span><span class=nv> </span><span class=s>%(message)s&#39;</span>
<span class=nt>handlers</span><span class=p>:</span>
<span class=w>  </span><span class=nt>console</span><span class=p>:</span>
<span class=w>    </span><span class=nt>class</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">logging.StreamHandler</span>
<span class=w>    </span><span class=nt>level</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">DEBUG</span>
<span class=w>    </span><span class=nt>formatter</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">simple</span>
<span class=w>    </span><span class=nt>stream</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ext://sys.stdout</span>
<span class=nt>loggers</span><span class=p>:</span>
<span class=w>  </span><span class=nt>sampleLogger</span><span class=p>:</span>
<span class=w>    </span><span class=nt>level</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">DEBUG</span>
<span class=w>    </span><span class=nt>handlers</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>console</span><span class="p p-Indicator">]</span>
<span class=w>    </span><span class=nt>propagate</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">no</span>
<span class=w>  </span><span class=nt>root</span><span class=p>:</span>
<span class=w>    </span><span class=nt>level</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">DEBUG</span>
<span class=w>    </span><span class=nt>handlers</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>console</span><span class="p p-Indicator">]</span>
</code></pre></div> <p>Load config from a <code>yaml</code> file:</p> <p><strong>Example:</strong> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>logging</span>
<span class=kn>import</span> <span class=nn>logging.config</span>
<span class=kn>import</span> <span class=nn>yaml</span>

<span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;config.yaml&#39;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
    <span class=n>config</span> <span class=o>=</span> <span class=n>yaml</span><span class=o>.</span><span class=n>safe_load</span><span class=p>(</span><span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>())</span>
    <span class=n>logging</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>dictConfig</span><span class=p>(</span><span class=n>config</span><span class=p>)</span>

<span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>

<span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s1>&#39;This is a debug message&#39;</span><span class=p>)</span>
</code></pre></div></p> <p><strong>Output:</strong> <div class=highlight><pre><span></span><code>2018-07-13 14:05:03,766 - __main__ - DEBUG - This is a debug message
</code></pre></div></p> <h3 id=links>Links<a class=headerlink href=#links title="Permanent link">&para;</a></h3> <ul> <li><a href=https://realpython.com/python-logging/ target=_blank>RealPython - Logging</a></li> <li><a href=https://docs.python.org/3/howto/logging.html#logging-basic-tutorial target=_blank>Basic logging tutorial - Python Docs</a></li> <li><a href=https://docs.python.org/3/howto/logging-cookbook.html#logging-cookbook target=_blank>Logging Cookbook - Python Docs</a></li> </ul> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2020-04-26T11:07:28+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2020-04-26</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.220ee61c.min.js></script> <script src=../../js/timeago.min.js></script> <script src=../../js/timeago_mkdocs_material.js></script> <script src=https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js></script> </body> </html>